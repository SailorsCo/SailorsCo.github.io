<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Device Profile</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#121833;
      --muted:#7f8db3;
      --text:#e7ecff;
      --accent:#6aa4ff;
      --accent-2:#9b7dff;
      --danger:#ff5d6e;
      --ok:#2dd4bf;
      --radius:20px;
    }

    *{ box-sizing:border-box; }
    html, body{
      height:100%;
      margin:0;
      background: radial-gradient(1200px 800px at 10% -10%, #1b2350 0%, var(--bg) 55%),
                  radial-gradient(800px 600px at 110% 10%, #141b3a 0%, transparent 60%);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height:1.45;
    }

    .container{ max-width:1100px; margin:32px auto; padding:0 16px; }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }

    .profile{
      display:grid;
      grid-template-columns: 160px 1fr;
      gap:24px;
      padding:22px;
      align-items:center;
    }

    .avatar-wrap{ display:flex; flex-direction:column; align-items:center; gap:12px; }
    .avatar{
      width:160px; height:160px; border-radius:50%; overflow:hidden;
      border:3px solid rgba(255,255,255,0.15);
      box-shadow:0 12px 25px rgba(0,0,0,0.45), inset 0 0 0 4px rgba(106,164,255,0.12);
      background:#0d1228; display:grid; place-items:center;
    }
    .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

    .btn{
      padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.15);
      background: linear-gradient(180deg, rgba(106,164,255,0.22), rgba(106,164,255,0.10));
      color:var(--text); font-weight:600; cursor:pointer;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
      box-shadow:0 6px 14px rgba(106,164,255,0.25);
      font-size:14px;
    }
    .btn:hover{ transform:translateY(-1px); }
    .btn:active{ transform:translateY(0); }
    .btn.secondary{ background:linear-gradient(180deg, rgba(155,125,255,0.22), rgba(155,125,255,0.10)); box-shadow:0 6px 14px rgba(155,125,255,0.25);} 
    .btn.ghost{ background:transparent; box-shadow:none; }

    .name-side{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .title{ font-size:clamp(20px,2.4vw,28px); margin:0; }
    .subtle{ color:var(--muted); }

    .section{ margin-top:24px; padding:22px; }
    .section h2{ margin:0 0 14px 0; font-size:clamp(16px,2vw,20px); }

    .grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:14px 18px; }
    .row{ display:flex; align-items:center; gap:10px; justify-content:space-between; padding:12px 14px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08); border-radius:12px; }
    .row .label{ color:var(--muted); font-weight:600; }
    .row .value{ font-variant-numeric:tabular-nums; }

    .inline-edit{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .input{ background:#0f1530; border:1px solid rgba(255,255,255,0.14); color:var(--text); padding:6px 8px; border-radius:8px; min-width:140px; max-width:250px; }

    .hint{ font-size:12px; color:var(--muted); margin-top:8px; }

    @media(max-width:640px){ .profile{grid-template-columns:1fr;} .grid{grid-template-columns:1fr;} .name-side{align-items:flex-start;} }
  </style>
</head>
<body>
  <div class="container">
    <section class="card profile">
      <div class="avatar-wrap">
        <div class="avatar"><img id="avatarImg" alt="Profile" src="https://dl.dropboxusercontent.com/scl/fi/m58gtxdccdvk581nd350a/Untitled-design-2025-08-16T205230.682.png?rlkey=nvbol6is7cmyx7wecwzaknezq&e=1&st=2cr9wl5w&dl=0" /></div>
        <input id="photoInput" type="file" accept="image/png" hidden />
        <button id="editPhotoBtn" class="btn" type="button">Edit Photo</button>
        <div class="hint">PNG only • stored locally in your browser</div>
      </div>
      <div>
        <div class="name-side">
          <h1 class="title"><span id="userName" class="value">Your Name</span></h1>
          <button id="editUserBtn" class="btn secondary" type="button">Edit</button>
        </div>
        <p class="subtle" style="margin-top:8px">Customize your profile and see details about this device below.</p>
      </div>
    </section>

    <section class="card section">
      <h2>About this Device</h2>
      <div class="grid">
        <div class="row"><span class="label">Operating System</span><span class="value" id="osValue">—</span></div>
        <div class="row"><span class="label">Browser</span><span class="value" id="browserValue">—</span></div>
        <div class="row">
          <div class="label">Device Name</div>
          <div class="inline-edit">
            <span id="deviceName" class="value">Sailors TV</span>
            <button id="editDeviceBtn" class="btn secondary" type="button">Edit</button>
          </div>
        </div>
        <div class="row"><span class="label">Language</span><span class="value" id="langValue">—</span></div>
        <div class="row"><span class="label">Timezone</span><span class="value" id="tzValue">—</span></div>
        <div class="row"><span class="label">Sailors TV Version:</span><span class="value">Sailors TV (Compact) 1.0 Beta</span></div>
      </div>
    </section>

    <section class="card section">
      <h2>Device Specifications</h2>
      <div class="grid">
        <div class="row"><span class="label">Storage (web quota)</span><span class="value" id="storageValue">—</span></div>
        <div class="row"><span class="label">Device Storage</span><span class="value" id="devStorageValue">—</span></div>
        <div class="row"><span class="label">RAM (approx)</span><span class="value" id="ramValue">—</span></div>
        <div class="row"><span class="label">Processor</span><span class="value" id="cpuValue">—</span></div>
        <div class="row"><span class="label">Memory (JS heap limit)</span><span class="value" id="heapValue">—</span></div>
        <div class="row"><span class="label">Screen Resolution</span><span class="value" id="screenValue">—</span></div>
      </div>
      <div class="hint">Values are best‑effort from your browser; some fields may be unavailable on certain devices/browsers.</div>
    </section>
  </div>

  <script>
    (function(){
      const $ = (id) => document.getElementById(id);
      const LS_KEYS = { userName: 'profile.userName', deviceName: 'profile.deviceName', avatar: 'profile.avatarDataUrl' };

      const bytesToHuman = (bytes) => {
        if (bytes == null) return '—';
        const units = ['B','KB','MB','GB','TB'];
        let i = 0; let val = bytes;
        while (val >= 1024 && i < units.length-1){ val /= 1024; i++; }
        return `${val.toFixed(val >= 10 ? 0 : 1)} ${units[i]}`;
      };

      function detectOS(){
        const ua = navigator.userAgent || '';
        const plt = (navigator.userAgentData && navigator.userAgentData.platform) || navigator.platform || '';
        const s = `${ua} ${plt}`.toLowerCase();
        if (/windows nt 10|windows nt 11|win64|win32/.test(s)) return 'Windows';
        if (/mac os x|macintosh|macintel/.test(s)) return 'macOS';
        if (/iphone|ipad|ipod|ios/.test(s)) return 'iOS';
        if (/android/.test(s)) return 'Android';
        if (/linux/.test(s)) return 'Linux';
        if (/cros/.test(s)) return 'ChromeOS';
        return ua;
      }

      function detectBrowser(){
        const ua = navigator.userAgent.toLowerCase();
        if (ua.includes('edg/')) return 'Microsoft Edge';
        if (ua.includes('opr/') || ua.includes('opera')) return 'Opera';
        if (ua.includes('firefox/')) return 'Firefox';
        if (ua.includes('chrome/') && !ua.includes('edg/')) return 'Chrome';
        if (ua.includes('safari/') && !ua.includes('chrome/')) return 'Safari';
        return 'Unknown';
      }

      const savedName = localStorage.getItem(LS_KEYS.userName);
      const savedDevice = localStorage.getItem(LS_KEYS.deviceName);
      const savedAvatar = localStorage.getItem(LS_KEYS.avatar);
      if (savedName) $('userName').textContent = savedName;
      if (savedDevice) $('deviceName').textContent = savedDevice;
      if (savedAvatar) $('avatarImg').src = savedAvatar;

      $('editPhotoBtn').addEventListener('click', () => $('photoInput').click());
      $('photoInput').addEventListener('change', (e) => {
        const file = e.target.files && e.target.files[0];
        if (!file) return;
        if (file.type !== 'image/png'){ alert('Please select a PNG file.'); e.target.value=''; return; }
        const reader = new FileReader();
        reader.onload = () => { $('avatarImg').src = reader.result; try{ localStorage.setItem(LS_KEYS.avatar, reader.result);}catch{} };
        reader.readAsDataURL(file);
      });

      function enableEdit(spanEl, btnEl, key){
        let input = null;
        btnEl.addEventListener('click', ()=>{
          if (!input){
            input = document.createElement('input');
            input.type = 'text';
            input.maxLength = 40;
            input.className = 'input';
            input.value = spanEl.textContent;
            spanEl.replaceWith(input);
            input.focus();
            btnEl.textContent = 'Save';
          } else {
            const newVal = input.value.trim().slice(0,40);
            spanEl.textContent = newVal || spanEl.textContent;
            localStorage.setItem(key, newVal || spanEl.textContent);
            input.replaceWith(spanEl);
            input = null;
            btnEl.textContent = 'Edit';
          }
        });
      }

      enableEdit($('userName'), $('editUserBtn'), LS_KEYS.userName);
      enableEdit($('deviceName'), $('editDeviceBtn'), LS_KEYS.deviceName);

      $('osValue').textContent = detectOS();
      $('browserValue').textContent = detectBrowser();
      $('langValue').textContent = navigator.language || 'Unknown';
      try{ $('tzValue').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown'; }catch{ $('tzValue').textContent='Unknown'; }

      if (navigator.storage && navigator.storage.estimate){
        navigator.storage.estimate().then(({quota, usage}) => {
          $('storageValue').textContent = quota ? `${bytesToHuman(usage)} used of ${bytesToHuman(quota)} quota` : 'Unavailable';
        }).catch(()=> $('storageValue').textContent='Unavailable');
      } else $('storageValue').textContent='Unavailable';

      if (navigator.deviceMemory) $('ramValue').textContent = `${navigator.deviceMemory} GB`; else $('ramValue').textContent='Unavailable';
      if (navigator.hardwareConcurrency) $('cpuValue').textContent = `${navigator.hardwareConcurrency} logical cores`; else $('cpuValue').textContent='Unavailable';
      const heap = performance?.memory?.jsHeapSizeLimit; $('heapValue').textContent = heap ? bytesToHuman(heap) : 'Unavailable';
      $('screenValue').textContent = `${window.screen.width} × ${window.screen.height} (DPR ${window.devicePixelRatio||1})`;

      // Approximate device storage (not accessible directly, so reuse quota info)
      if (navigator.storage && navigator.storage.estimate){
        navigator.storage.estimate().then(({quota}) => {
          $('devStorageValue').textContent = quota ? `${bytesToHuman(quota)}` : 'Unavailable';
        }).catch(()=> $('devStorageValue').textContent='Unavailable');
      } else $('devStorageValue').textContent='Unavailable';
    })();
  </script>
</body>
</html>
